<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>AI í—¤ì–´ ìŠ¤íƒ€ì¼ëŸ¬ - SKINNER</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root {
      --neon1: #c084fc;
      --neon2: #60a5fa;
      --neon3: #fa709a;
      --glass: rgba(15, 23, 42, 0.75);
      --border: rgba(148, 163, 255, 0.4);
      --text: #f8fafc;
      --text-sub: #cbd5e1;
      --bg1: #0f172a;
      --bg2: #020617;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    }

    body {
      background: radial-gradient(circle at top, #1d2455, #020617 55%);
      min-height: 100vh;
      padding: 18px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      color: var(--text);
    }

    .app {
      width: 100%;
      max-width: 480px;
      background: var(--glass);
      border: 1px solid var(--border);
      border-radius: 24px;
      backdrop-filter: blur(16px);
      padding: 18px;
      box-shadow: 0 20px 50px rgba(15, 23, 42, 0.9);
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    header {
      padding-bottom: 6px;
      border-bottom: 1px solid rgba(30, 64, 175, 0.4);
      margin-bottom: 4px;
    }

    .header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .title {
      font-size: 20px;
      font-weight: 700;
      background: linear-gradient(90deg, var(--neon1), var(--neon2), var(--neon3));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .sub {
      font-size: 12px;
      color: var(--text-sub);
      margin-top: 3px;
    }

    .skinner-mark {
      min-width: 74px;
      padding: 6px 10px;
      border-radius: 999px;
      background: radial-gradient(circle at top, #4f46e5, #020617 70%);
      border: 1px solid rgba(129, 140, 248, 0.95);
      font-size: 11px;
      font-weight: 700;
      color: #e5e7eb;
      text-align: center;
      letter-spacing: 0.08em;
      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.8);
    }

    .section {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .section-title {
      font-size: 14px;
      font-weight: 600;
    }

    .section-caption {
      font-size: 11px;
      color: var(--text-sub);
    }

    .upload-box {
      margin-top: 4px;
      padding: 16px;
      border-radius: 20px;
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.9);
      text-align: center;
      cursor: pointer;
      transition: 0.18s;
    }

    .upload-box:hover {
      background: rgba(30, 64, 175, 0.3);
    }

    .upload-text {
      font-size: 14px;
      margin-bottom: 6px;
    }

    .upload-hint {
      font-size: 11px;
      color: var(--text-sub);
    }

    .img-preview {
      width: 100%;
      max-width: 190px;
      margin: 10px auto 0;
      border-radius: 14px;
      border: 1px solid var(--border);
      display: none;
      object-fit: cover;
      background: #020617;
    }

    #photoInput {
      display: none;
    }

    .select-row {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .select-group {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .select-btn {
      padding: 9px 14px;
      border-radius: 14px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid var(--border);
      color: var(--text-sub);
      cursor: pointer;
      font-size: 13px;
      transition: 0.18s;
    }

    .select-btn.active {
      background: linear-gradient(135deg, var(--neon1), var(--neon2));
      color: white;
      border: none;
      box-shadow: 0 4px 14px rgba(192, 132, 252, 0.5);
    }

    .go-btn {
      padding: 13px;
      border-radius: 18px;
      font-size: 15px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(135deg, var(--neon3), var(--neon2));
      color: white;
      box-shadow: 0 12px 26px rgba(250, 112, 154, 0.45);
      transition: 0.18s;
      margin-top: 4px;
    }

    .go-btn:active {
      transform: scale(0.97);
    }

    .footer-note {
      margin-top: 4px;
      font-size: 11px;
      color: var(--text-sub);
      text-align: center;
    }

    /* ë¡œë”© ì˜¤ë²„ë ˆì´ (ìŠ¤í‚¤ë„ˆ ë§ˆí¬) */
    #loadingOverlay {
      display: none;
      position: fixed;
      z-index: 9999;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      backdrop-filter: blur(4px);
      background: rgba(0, 0, 0, 0.55);
      justify-content: center;
      align-items: center;
    }

    .loader-wrap {
      background: rgba(15, 23, 42, 0.96);
      border-radius: 20px;
      padding: 18px 22px;
      border: 1px solid rgba(148, 163, 255, 0.7);
      box-shadow: 0 20px 50px rgba(15, 23, 42, 0.95);
      text-align: center;
      min-width: 200px;
    }

    .loader-ring {
      margin: 0 auto;
      width: 46px;
      height: 46px;
      border-radius: 50%;
      border: 4px solid rgba(148, 163, 255, 0.25);
      border-top-color: var(--neon1);
      animation: spin 1s linear infinite;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .loader-inner {
      font-size: 9px;
      font-weight: 700;
      letter-spacing: 0.12em;
      color: #e5e7eb;
    }

    .loader-text {
      margin-top: 8px;
      font-size: 12px;
      color: var(--text-sub);
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
  </style>
</head>
<body>

  <!-- ğŸ”¥ ìŠ¤í‚¤ë„ˆ ë¡œë”© ì˜¤ë²„ë ˆì´ -->
  <div id="loadingOverlay">
    <div class="loader-wrap">
      <div class="loader-ring">
        <div class="loader-inner">SKINNER</div>
      </div>
      <div class="loader-text">AIê°€ ìŠ¤íƒ€ì¼ì„ ìƒì„± ì¤‘ì…ë‹ˆë‹¤...</div>
    </div>
  </div>

  <div class="app">
    <header>
      <div class="header-top">
        <div>
          <div class="title">AI í—¤ì–´ ìŠ¤íƒ€ì¼ëŸ¬</div>
          <div class="sub">ì‚¬ì§„ í•œ ì¥ìœ¼ë¡œ 3ê°€ì§€ ìŠ¤íƒ€ì¼ ë¯¸ë¦¬ë³´ê¸°</div>
        </div>
        <div class="skinner-mark">SKINNER</div>
      </div>
    </header>

    <!-- ì‚¬ì§„ ì—…ë¡œë“œ ì„¹ì…˜ -->
    <section class="section">
      <div class="section-title">1. ê³ ê° ì‚¬ì§„ ì—…ë¡œë“œ</div>
      <div class="section-caption">
        ì•ëª¨ìŠµì´ ì˜ ë‚˜ì˜¨ ì‚¬ì§„ì„ ì´¬ì˜í•˜ê±°ë‚˜, ê°¤ëŸ¬ë¦¬ì—ì„œ ë¶ˆëŸ¬ì˜¤ì„¸ìš”.
      </div>

      <div class="upload-box" onclick="document.getElementById('photoInput').click()">
        <div class="upload-text">ğŸ“· ì‚¬ì§„ ì—…ë¡œë“œ / ì´¬ì˜í•˜ê¸°</div>
        <div class="upload-hint">ì–¼êµ´ ì „ì²´ê°€ ì˜ ë‚˜ì˜¤ë„ë¡ ì •ë©´ì— ê°€ê¹ê²Œ ì°ì–´ì£¼ì„¸ìš”.</div>
        <img id="preview" class="img-preview" alt="ë¯¸ë¦¬ë³´ê¸°" />
        <input type="file" id="photoInput" accept="image/*" />
      </div>
    </section>

    <!-- ì„±ë³„ / ë¨¸ë¦¬ ê¸¸ì´ ì„ íƒ -->
    <section class="section">
      <div class="select-row">
        <div class="section-title">2. ê³ ê° ì •ë³´</div>
        <div class="section-caption">ì„±ë³„ê³¼ í˜„ì¬ ë¨¸ë¦¬ ê¸¸ì´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</div>

        <div>
          <div class="section-caption" style="margin-bottom:4px;">ì„±ë³„</div>
          <div class="select-group">
            <div class="select-btn" data-value="female" onclick="toggleSelect(this,'gender')">ì—¬ì„±</div>
            <div class="select-btn" data-value="male" onclick="toggleSelect(this,'gender')">ë‚¨ì„±</div>
          </div>
        </div>

        <div>
          <div class="section-caption" style="margin-top:6px;margin-bottom:4px;">í˜„ì¬ ë¨¸ë¦¬ ê¸¸ì´</div>
          <div class="select-group">
            <div class="select-btn" data-value="short" onclick="toggleSelect(this,'hair')">ì§§ìŒ</div>
            <div class="select-btn" data-value="mid" onclick="toggleSelect(this,'hair')">ì¤‘ê°„</div>
            <div class="select-btn" data-value="long" onclick="toggleSelect(this,'hair')">ê¹€</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ì‹¤í–‰ ë²„íŠ¼ -->
    <button class="go-btn" onclick="goNext()">AI ìŠ¤íƒ€ì¼ 3ê°€ì§€ ë³´ê¸°</button>

    <div class="footer-note">
      * ì‹¤ì œ ìŠ¤íƒ€ì¼ ì‚¬ì§„ì€ í…ŒìŠ¤íŠ¸ ë‹¨ê³„ì—ì„œëŠ” ê°™ì€ ì‚¬ì§„ìœ¼ë¡œ í‘œì‹œë˜ë©°,<br/>
      ë‚˜ì¤‘ì— AI í—¤ì–´ ë³€í™˜ ëª¨ë¸ê³¼ ì—°ë™ë©ë‹ˆë‹¤.
    </div>
  </div>

  <script>
    // ìƒíƒœ ë³€ìˆ˜
    let uploadedImage = null;
    let selectedGender = null;
    let selectedHair = null;

    console.log("index ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œë¨");

    // ì‚¬ì§„ ì—…ë¡œë“œ ì²˜ë¦¬
    const photoInput = document.getElementById("photoInput");
    const previewImg = document.getElementById("preview");

    photoInput.addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = (ev) => {
        uploadedImage = ev.target.result;
        previewImg.src = uploadedImage;
        previewImg.style.display = "block";
        console.log("ì´ë¯¸ì§€ ì—…ë¡œë“œ ì™„ë£Œ");
      };
      reader.readAsDataURL(file);
    });

    // ì„±ë³„ / ë¨¸ë¦¬ ê¸¸ì´ ì„ íƒ
    function toggleSelect(btn, type) {
      const group = btn.parentNode.querySelectorAll(".select-btn");
      group.forEach((b) => b.classList.remove("active"));
      btn.classList.add("active");

      if (type === "gender") {
        selectedGender = btn.dataset.value;
        console.log("ì„±ë³„ ì„ íƒ:", selectedGender);
      }
      if (type === "hair") {
        selectedHair = btn.dataset.value;
        console.log("ë¨¸ë¦¬ ê¸¸ì´ ì„ íƒ:", selectedHair);
      }
    }

    // ê²°ê³¼ í˜ì´ì§€ë¡œ ì´ë™ + ìŠ¤í‚¤ë„ˆ ë¡œë”© í‘œì‹œ
    function goNext() {
      console.log("goNext ì‹¤í–‰");

      if (!uploadedImage) {
        alert("ì‚¬ì§„ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.");
        return;
      }
      if (!selectedGender) {
        alert("ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
        return;
      }
      if (!selectedHair) {
        alert("ë¨¸ë¦¬ ê¸¸ì´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.");
        return;
      }

      const overlay = document.getElementById("loadingOverlay");
      if (overlay) {
        overlay.style.display = "flex";
      }

      // ì§€ê¸ˆì€ ì„œë²„ ì—†ì´ í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ, ê°™ì€ ì‚¬ì§„ 3ê°œë¥¼ ìŠ¤íƒ€ì¼ë¡œ ì €ì¥
      setTimeout(() => {
        sessionStorage.setItem("basePhoto", uploadedImage);

        const dummyStyles = [
          { name: "ìŠ¤íƒ€ì¼ 1 (í…ŒìŠ¤íŠ¸)", image: uploadedImage },
          { name: "ìŠ¤íƒ€ì¼ 2 (í…ŒìŠ¤íŠ¸)", image: uploadedImage },
          { name: "ìŠ¤íƒ€ì¼ 3 (í…ŒìŠ¤íŠ¸)", image: uploadedImage },
        ];
        sessionStorage.setItem("hairStyles", JSON.stringify(dummyStyles));

        if (overlay) {
          overlay.style.display = "none";
        }

        window.location.href = "/result.html";
      }, 1200); // 1.2ì´ˆ ì •ë„ ë¡œë”© ì—°ì¶œ
    }
  </script>
</body>
</html>
